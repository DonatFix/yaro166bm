!function(){"use strict";var e={4935:function(e,t,n){var o=n(87),i=n(144),s=n(629),a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"slide-fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.loaded,expression:"$store.state.loaded"}],staticClass:"gift-help js-gift-help"},[n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.showPhoneNumber,expression:"$store.state.showPhoneNumber"}],staticClass:"gift-help__popup"},[n("i",{staticClass:"icon-phone"}),e._v(" "),n("a",{attrs:{href:"tel:"+e.$store.state.settings.telephoneNumberInternational,target:"_blank",rel:"noopener"}},[e._v("\n                    "+e._s(e.$store.state.settings.telephoneNumber)+"\n                ")]),e._v(" "),n("div",{staticClass:"gift-help__popup__note",domProps:{innerHTML:e._s(e.$store.getters.getOpeningTimes)}}),e._v(" "),n("div",{staticClass:"gift-help__popup__close",on:{click:e.togglePhoneNumberPopup}},[n("i",{staticClass:"icon-ed-close"})])])]),e._v(" "),n("div",{staticClass:"gift-help__inner"},[n("div",{staticClass:"gift-help__user"},[n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.isChatAvailable,expression:"$store.state.isChatAvailable"}],staticClass:"gift-help__user__status"})]),e._v(" "),n("transition",{attrs:{name:"fade"}},[n("div",{directives:[{name:"show",rawName:"v-show",value:e.$store.state.showHelp||e.$store.state.showContact,expression:"$store.state.showHelp || $store.state.showContact"}],staticClass:"gift-help__user__close",on:{click:e.close}},[n("i",{staticClass:"icon-ed-close"})])]),e._v(" "),n("img",{attrs:{src:e.$store.state.employeeImage,alt:""},on:{click:e.onEmployeeImageClick}})],1),e._v(" "),n("transition",{attrs:{name:"slide-fade",mode:"out-in"}},[e.$store.state.showHelp?n("div",{key:"help",staticClass:"gift-help__message",on:{click:e.updateState}},[e._v("\n                    "+e._s(e.$store.getters.translate("help_text"))+" "),n("br"),e._v(" "),n("i",{staticClass:"icon-phone"}),e._v(" "),n("i",{staticClass:"icon-contact"}),e._v("\n                    "+e._s(e.$store.getters.translate("met"))+" "+e._s(e.$store.state.employeeName)+"\n                ")]):e.$store.state.showContact?n("div",{key:"contact",staticClass:"gift-help__contact"},[n("div",{staticClass:"gift-help__contact__item pointer",on:{click:function(t){e.openChat(),e.onButtonClick("Chat")}}},[e.$store.state.isChatAvailable?n("span",[n("i",{staticClass:"icon-contact"}),e._v("\n                            "+e._s(e.$store.getters.translate("chat"))+"\n                        ")]):n("span",[n("i",{staticClass:"icon-envelope-open"}),e._v("\n                            "+e._s(e.$store.getters.translate("mail"))+"\n                        ")])]),e._v(" "),n("div",{staticClass:"gift-help__contact__item pointer",on:{click:function(t){e.togglePhoneNumberPopup(),e.onButtonClick("Phone")}}},[n("i",{staticClass:"icon-phone-open"}),e._v("\n                        "+e._s(e.$store.getters.translate("bel"))+"\n                    ")]),e._v(" "),n("div",{staticClass:"gift-help__contact__item",on:{click:function(t){return e.onButtonClick("FAQ")}}},[n("a",{attrs:{href:e.$store.state.settings.faqLink}},[n("i",{staticClass:"icon-faq"}),e._v("\n                            "+e._s(e.$store.getters.translate("faq"))+"\n                        ")])])]):e._e()])],1)],1)])};a._withStripped=!0;var r=n(1798);n(9826),n(2772),n(7042),n(1539),n(8309),n(1038),n(8783),n(2526),n(1817),n(2165),n(6992),n(3948);function l(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var c=function(){function e(t,n,o){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.firstName=t,this.email=n,this.avatar=o}var t,n,o;return t=e,(n=[{key:"getName",value:function(){return this.firstName}},{key:"getEmail",value:function(){return this.email}},{key:"getAvatar",value:function(){return this.avatar}}])&&l(t.prototype,n),o&&l(t,o),e}(),u=n(9947),h=n.n(u);function m(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var o=0,i=function(){};return{s:i,n:function(){return o>=e.length?{done:!0}:{done:!1,value:e[o++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,a=!0,r=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return a=e.done,e},e:function(e){r=!0,s=e},f:function(){try{a||null==n.return||n.return()}finally{if(r)throw s}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,o=new Array(t);n<t;n++)o[n]=e[n];return o}function f(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.robinSettings={tab_position:"right",hide_tab:!0,mobile_hide_tab:!0},this.availableCustomerServiceEmployees=[],this.chosenCustomerServiceEmployee=null,this.robinJSUrl="https://selfservice.robinhq.com/external/robin/hwz3v70m.js?cache=busted",this.urlHash=window.location.hash.substr(1),this.chatUserCookieName="chatUserEmail"}var t,n,o;return t=e,(n=[{key:"loadChosenCustomerServiceEmployee",value:function(){this.chosenCustomerServiceEmployee=this.getCustomerServiceEmployee()}},{key:"getCustomerServiceEmployee",value:function(){var e=this;if(this.hasUserPreferredCustomerServiceEmployee()){var t=this.availableCustomerServiceEmployees.find((function(t){return t.getEmail()===h().getItem(e.chatUserCookieName)}));if(t instanceof c)return t}return this.availableCustomerServiceEmployees[Math.floor(Math.random()*this.availableCustomerServiceEmployees.length)]||null}},{key:"loadAvailableCustomerServiceEmployees",value:function(){var e,t=m(window.__robin.getWebStoreUsers());try{for(t.s();!(e=t.n()).done;){var n=e.value;"online"===n.actualPresence&&this.availableCustomerServiceEmployees.push(new c(n.firstName,n.email,n.avatar128))}}catch(e){t.e(e)}finally{t.f()}}},{key:"getChosenCustomerServiceEmployee",value:function(){return this.chosenCustomerServiceEmployee instanceof c==0&&this.loadChosenCustomerServiceEmployee(),this.chosenCustomerServiceEmployee}},{key:"isChatAvailable",value:function(){return window.__robin.getOnlineStatus()}},{key:"hasUserPreferredCustomerServiceEmployee",value:function(){return h().hasItem(this.chatUserCookieName)}},{key:"hasCustomerServiceEmployeeAvailable",value:function(){return this.availableCustomerServiceEmployees.length>0}},{key:"shouldOpenChatOnLoad",value:function(){return-1!==this.urlHash.indexOf("showChat")}}])&&f(t.prototype,n),o&&f(t,o),e}();function d(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var g=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.model=t}var t,n,o;return t=e,(n=[{key:"init",value:function(){window.robin_settings=this.model.robinSettings,window.robin_settings.callback=this.onRobinCallback.bind(this),this.bindListeners(),this.loadRobinScript()}},{key:"bindListeners",value:function(){r.subscribe("openChatWindow",this.openChatWindow.bind(this))}},{key:"loadRobinScript",value:function(){var e=document.createElement("script");e.src=this.model.robinJSUrl,e.async=!0,e.defer=!0,document.head.appendChild(e)}},{key:"onRobinCallback",value:function(e){"init"===e&&this.onRobinInitialized()}},{key:"onRobinInitialized",value:function(){this.bindListeners(),!1!==this.model.isChatAvailable()?(this.model.loadAvailableCustomerServiceEmployees(),!1!==this.model.hasCustomerServiceEmployeeAvailable()?(this.model.loadChosenCustomerServiceEmployee(),this.model.shouldOpenChatOnLoad()&&this.openChatWindow(),r.publish("robinChatInitialized",this.model.getChosenCustomerServiceEmployee())):this.onChatUnavailable()):this.onChatUnavailable()}},{key:"setPreferredCustomerServiceEmployeeCookie",value:function(){var e=new Date;e.setTime(e.getTime()+864e5),h().setItem(this.model.chatUserCookieName,this.model.getChosenCustomerServiceEmployee().getEmail(),e)}},{key:"onChatUnavailable",value:function(){r.publish("robinChatUnavailable")}},{key:"isChatAvailable",value:function(){return this.model.isChatAvailable()}},{key:"getCustomerServiceEmployee",value:function(){return this.model.getCustomerServiceEmployee()}},{key:"openChatWindow",value:function(){this.model.isChatAvailable()?(window.__robin.chat(this.model.getChosenCustomerServiceEmployee().getEmail()),this.setPreferredCustomerServiceEmployeeCookie()):this.model.hasUserPreferredCustomerServiceEmployee()?window.__robin.show("chat"):window.__robin.show("contact_form")}}])&&d(t.prototype,n),o&&d(t,o),e}(),b=(n(107),{name:"gift-help",props:{tracker:{type:Object,default:null}},mounted:function(){var e=this;this.$store.commit("setBlankEmployeeImage");var t=new g(new v);t.init(),this.chatService=t,r.subscribe("robinChatInitialized",(function(){var t=e.chatService.isChatAvailable();if(e.$store.commit("setIsChatAvailable",t),t){var n=e.chatService.getCustomerServiceEmployee();null!==n&&(e.$store.commit("setEmployeeName",n.getName()),e.$store.commit("setEmployeeImage",n.getAvatar()))}if(!h().getItem("giftHelpMessageSeen")){e.$store.commit("setShowHelp",!0),setTimeout((function(){return e.$store.commit("setShowHelp",!1)}),3e3);var o=new Date;o.setTime(o.getTime()+864e5),h().setItem("giftHelpMessageSeen","true",o)}e.$store.commit("setLoaded",!0)})),r.subscribe("robinChatUnavailable",(function(){e.$store.commit("setDefaultEmployeeImage"),e.$store.commit("setLoaded",!0)})),document.addEventListener("click",(function(t){t.target&&t.target.closest(".js-startChatDirect")&&e.openChat()}))},methods:{onEmployeeImageClick:function(){var e=this;this.updateState().then((function(){e.$store.state.showContact&&e.tracker.track("GiftHelp Opened",{category:"GiftHelp"})}))},onButtonClick:function(e){this.tracker.track("GiftHelp Button Clicked",{category:"GiftHelp",type:e,label:e})},updateState:function(){return this.$store.dispatch("updateState")},close:function(){return this.$store.dispatch("close")},togglePhoneNumberPopup:function(){return this.$store.dispatch("togglePhoneNumberPopup")},openChat:function(){this.chatService.openChatWindow()}}}),C=(0,n(1900).Z)(b,a,[],!1,null,null,null);C.options.__file="vue/gift-help/App.vue";var y=C.exports;var _=document.getElementById("giftHelpVueApp");if(_){var w=JSON.parse(_.dataset.giftHelpSettings),S=new o.Tracker,k=function(e,t,n){return e.use(t),new t.Store({state:{showHelp:!1,showContact:!1,showPhoneNumber:!1,settings:n,loaded:!1,employeeName:"",employeeImage:"",isChatAvailable:!1},actions:{updateState:function(e){var t=e.commit;this.state.showContact||this.state.showHelp?this.state.showContact?(t("setShowHelp",!1),t("setShowContact",!1),t("setShowPhoneNumber",!1)):(t("setShowHelp",!1),t("setShowContact",!0)):t("setShowContact",!0)},togglePhoneNumberPopup:function(e){var t=e.commit;this.state.showPhoneNumber?t("setShowPhoneNumber",!1):t("setShowPhoneNumber",!0)},close:function(e){var t=e.commit;t("setShowPhoneNumber",!1),t("setShowHelp",!1),t("setShowContact",!1)}},mutations:{setShowHelp:function(e,t){e.showHelp=t},setShowContact:function(e,t){e.showContact=t},setShowPhoneNumber:function(e,t){e.showPhoneNumber=t},setLoaded:function(e){e.loaded=!0},setEmployeeName:function(e,t){e.employeeName=t},setEmployeeImage:function(e,t){e.employeeImage=t},setBlankEmployeeImage:function(e){e.employeeImage=e.settings.imagesUrl+"images/template/MLG/blank_contactperson.png"},setDefaultEmployeeImage:function(e){e.employeeImage=e.settings.imagesUrl+"images/template/MLG/helpdesk-default-employee.jpg"},setIsChatAvailable:function(e,t){e.isChatAvailable=t}},getters:{translate:function(e){return function(t){return"string"==typeof e.settings.translations[t]?e.settings.translations[t]:t}},getOpeningTimes:function(e){return"opening_time_exception"===e.settings.openingTimesTranslations.opening_time_exception&&(e.settings.openingTimesTranslations.opening_time_exception=""),e.settings.openingTimesTranslations.service_available_at+e.settings.openingTimesTranslations.opening_times+e.settings.openingTimesTranslations.opening_time_exception}}})}(i.Z,s.ZP,w);new i.Z({store:k,render:function(e){return e(y,{props:{tracker:S}})}}).$mount(_)}}},t={};function n(o){if(t[o])return t[o].exports;var i=t[o]={id:o,loaded:!1,exports:{}};return e[o].call(i.exports,i,i.exports,n),i.loaded=!0,i.exports}n.m=e,n.x=function(){},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,{a:t}),t},n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.nmd=function(e){return e.paths=[],e.children||(e.children=[]),e},function(){var e={8105:0},t=[[4935,4893,6730,6954,9738,2125,2039,8035,4507]],o=function(){},i=function(i,s){for(var a,r,l=s[0],c=s[1],u=s[2],h=s[3],m=0,p=[];m<l.length;m++)r=l[m],n.o(e,r)&&e[r]&&p.push(e[r][0]),e[r]=0;for(a in c)n.o(c,a)&&(n.m[a]=c[a]);for(u&&u(n),i&&i(s);p.length;)p.shift()();return h&&t.push.apply(t,h),o()},s=self.webpackChunkwebshop_frontend=self.webpackChunkwebshop_frontend||[];function a(){for(var o,i=0;i<t.length;i++){for(var s=t[i],a=!0,r=1;r<s.length;r++){var l=s[r];0!==e[l]&&(a=!1)}a&&(t.splice(i--,1),o=n(n.s=s[0]))}return 0===t.length&&(n.x(),n.x=function(){}),o}s.forEach(i.bind(null,0)),s.push=i.bind(null,s.push.bind(s));var r=n.x;n.x=function(){return n.x=r||function(){},(o=a)()}}();n.x()}();
//# sourceMappingURL=gift-help-vue.e596b138.js.map