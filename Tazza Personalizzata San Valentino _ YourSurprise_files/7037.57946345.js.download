(self.webpackChunkwebshop_frontend=self.webpackChunkwebshop_frontend||[]).push([[7037],{1899:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});n(1038),n(8783),n(9554),n(4747),n(1539),n(9714);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.numberElements=Array.from(t.getElementsByClassName("js-cartBox-number")),this.iconElements=Array.from(t.getElementsByClassName("js-cart-icon")),this.dataElements=Array.from(t.querySelectorAll("[data-cart-amount]"))}var t,n,a;return t=e,(n=[{key:"updateWithAmount",value:function(e){this.updateNumber(e),e>99&&this.addBigCheckoutVisualization(),e>0?this.showCartAmount():this.hideCartAmount()}},{key:"updateNumber",value:function(e){this.dataElements.forEach((function(t){t instanceof HTMLElement&&(t.dataset.cartAmount=e.toString())})),this.numberElements.forEach((function(t){t.innerHTML=e.toString()}))}},{key:"addBigCheckoutVisualization",value:function(){this.numberElements.forEach((function(e){e.classList.add("cartBox__circle__numbers--largeOrder")}))}},{key:"showCartAmount",value:function(){this.iconElements.forEach((function(e){e.classList.remove("icon-cart-empty"),e.classList.add("icon-cart-full")}))}},{key:"hideCartAmount",value:function(){this.iconElements.forEach((function(e){e.classList.add("icon-cart-empty"),e.classList.remove("icon-cart-full")}))}}])&&r(t.prototype,n),a&&r(t,a),e}()},8557:function(e,t,n){"use strict";n.d(t,{Z:function(){return m}});n(7042),n(1539),n(8309),n(1038),n(8783),n(2526),n(1817),n(2165),n(6992),n(3948);var r=n(722),a=n(9666);function o(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,u=!0,s=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return u=e.done,e},e:function(e){s=!0,o=e},f:function(){try{u||null==n.return||n.return()}finally{if(s)throw o}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function u(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s,c,l=function(){function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),r.S1({dsn:t,environment:n,release:a,allowUrls:[/(yspacc|ysp|yspimages|yoursurprise|yoursurprisecom)\./],ignoreErrors:["Error while fetching url","Invalid character in header field name"],tracesSampler:function(){return/(yoursurprise|yspacc|ysp)\./.test(document.location.host)?1:0}})}var t,n,i;return t=e,(n=[{key:"log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};a.Tb(e,{extra:t}),window.ineum&&window.ineum("reportError",e,{meta:t})}},{key:"processErrorQueue",value:function(){var e=this;if(window.errorQueue){window.errorQueue.push=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];for(var a=0,o=n;a<o.length;a++){var i=o[a];e.log(i)}return 0};var t,n=o(window.errorQueue);try{for(n.s();!(t=n.n()).done;){var r=t.value;this.log(r)}}catch(e){n.e(e)}finally{n.f()}window.errorQueue.length=0}}}])&&u(t.prototype,n),i&&u(t,i),e}();window.siteMetadata.sentryEnabled&&window.siteMetadata.sentryDsn&&(c=window.siteMetadata.sentryDsn);var f=new l(c,window.siteMetadata.environment,null!==(s=window.siteMetadata.version)&&void 0!==s?s:void 0);f.processErrorQueue();var m=f},1975:function(e,t,n){"use strict";n.d(t,{Z:function(){return g}});n(9554),n(4747),n(1038),n(8783),n(4765),n(4916),n(2222),n(8674),n(1539),n(2526),n(1817),n(2165),n(6992),n(3948),n(7042),n(8309),n(5666);var r=n(9127);n(7941);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var o=new(function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.getStorage=t,this.inMemoryStorage={}}var t,n,r;return t=e,(n=[{key:"length",get:function(){return this.isSupported()?this.getStorage().length:Object.keys(this.inMemoryStorage).length}},{key:"clear",value:function(){this.isSupported()?this.getStorage().clear():this.inMemoryStorage={}}},{key:"getItem",value:function(e){return this.isSupported()?this.getStorage().getItem(e):this.inMemoryStorage.hasOwnProperty(e)?this.inMemoryStorage[e]:null}},{key:"key",value:function(e){return this.isSupported()?this.getStorage().key(e):Object.keys(this.inMemoryStorage)[e]||null}},{key:"removeItem",value:function(e){this.isSupported()?this.getStorage().removeItem(e):delete this.inMemoryStorage[e]}},{key:"setItem",value:function(e,t){this.isSupported()?this.getStorage().setItem(e,t):this.inMemoryStorage[e]=t}},{key:"isSupported",value:function(){try{var e="__YSP_storage_test_key__";return this.getStorage().setItem(e,e),this.getStorage().removeItem(e),!0}catch(e){return!1}}}])&&a(t.prototype,n),r&&a(t,r),e}())((function(){return window.localStorage})),i=n(129),u=n.n(i),s=n(4022),c=n(3765);function l(e,t){var n;if("undefined"==typeof Symbol||null==e[Symbol.iterator]){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,i=!0,u=!1;return{s:function(){n=e[Symbol.iterator]()},n:function(){var e=n.next();return i=e.done,e},e:function(e){u=!0,o=e},f:function(){try{i||null==n.return||n.return()}finally{if(u)throw o}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e){return(m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function p(e,t,n,r,a,o,i){try{var u=e[o](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,a)}function h(e){return function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){p(o,r,a,i,u,"next",e)}function u(e){p(o,r,a,i,u,"throw",e)}i(void 0)}))}}function d(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var g=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.baseUrl=t,this.campaignFromQuery=n,this.isPopupInitialized=!1,this.showPopup=function(){if(document.getElementById("js-discount-campaign-data")instanceof Element){var e=(0,s.Z)(window).width();s.Z.fancybox({href:"#discountCampaignPopup",margin:0,padding:0,width:e&&e<800?"auto":800,height:"auto",autoSize:!1})}}}var t,n,a,i,f,p,g,y;return t=e,n=[{key:"initBanner",value:(y=h(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(document.getElementById("discountCampaignPopup")instanceof Element){e.next=3;break}return e.abrupt("return");case 3:return e.next=5,this.retrieveDiscountCampaignData();case 5:if(t=e.sent,this.saveDiscountCampaignToLocalStorage(t),!this.campaignHasEnded(t)){e.next=9;break}return e.abrupt("return");case 9:this.initBannerWithCampaign(t);case 10:case"end":return e.stop()}}),e,this)}))),function(){return y.apply(this,arguments)})},{key:"campaignHasEnded",value:function(e){return null!==e&&new Date(e.endDate)<new Date}},{key:"initBannerWithCampaign",value:function(t){var n=this;if(!this.campaignHasEnded(t)){var r=t.text||"",a="";try{a=decodeURIComponent(r)}catch(e){a=r}var o=document.getElementsByClassName("js-discountCampaignContent");Array.from(o).forEach((function(e){var r=e.getElementsByClassName("js-discountCampaignLink")[0];r&&(r.addEventListener("click",(function(){n.initPopup(t.hash).then(n.showPopup)})),r.classList.add("pointer"));var o=e.getElementsByClassName("js-discountCampaignMessage");Array.from(o).forEach((function(t){t.innerHTML="";var n=document.createElement("span");n.innerHTML=a,t.appendChild(n),e.appendChild(r)}))}));var i=document.getElementsByClassName("js-discountCampaign");Array.from(i).forEach((function(e){e.classList.remove("hidden")})),e.hideNotificationBar()}}},{key:"retrieveDiscountCampaignData",value:(g=h(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.retrieveDiscountCampaignDataFromLocalStorage(),n=function(e,t){return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()&&e.getDate()===t.getDate()},null!==t&&n(new Date(t.updatedAt),new Date)){e.next=6;break}return e.next=5,this.retrieveDiscountCampaignDataForCurrentUser();case 5:t=e.sent;case 6:return e.abrupt("return",t);case 7:case"end":return e.stop()}}),e,this)}))),function(){return g.apply(this,arguments)})},{key:"retrieveDiscountCampaignDataFromLocalStorage",value:function(){var t=this.retrieveDiscountCampaignDataFrom((function(){return o.getItem(e.CAMPAIGN_STORAGE_NAME)}));return!e.isDiscountCampaignData(t)||this.campaignHasEnded(t)?null:t}},{key:"retrieveDiscountCampaignDataFrom",value:function(e){var t=e();return t?JSON.parse(t):null}},{key:"refreshLocalStorage",value:function(){var e=this;this.retrieveDiscountCampaignDataForCurrentUser().then((function(t){e.saveDiscountCampaignToLocalStorage(t)}))}},{key:"retrieveDiscountCampaignDataForCurrentUser",value:(p=h(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,(0,c.Z)("".concat(this.baseUrl,"discount-campaign/find"),{method:"GET",headers:{"Content-Type":"application/json"}});case 2:return n=t.sent,t.next=5,n.json();case 5:if(r=t.sent,!e.isDiscountCampaignData(r)){t.next=8;break}return t.abrupt("return",r);case 8:throw new Error("Got unexpected discount data");case 9:case"end":return t.stop()}}),t,this)}))),function(){return p.apply(this,arguments)})},{key:"saveDiscountCampaignToLocalStorage",value:function(t){o.setItem(e.CAMPAIGN_STORAGE_NAME,JSON.stringify(t))}},{key:"initPopup",value:(f=h(regeneratorRuntime.mark((function t(n){var r,a,o,i,l,f,m,p,h,d,g,y,v=this;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if((r=document.getElementById("discountCampaignPopup"))&&n&&!this.isPopupInitialized){t.next=3;break}return t.abrupt("return");case 3:if(a=this.retrieveDiscountCampaignDataFromLocalStorage(),!(o=(null==a?void 0:a.hash)===n)||!this.campaignHasEnded(a)){t.next=7;break}return t.abrupt("return");case 7:return i=u().parse(window.location.search,{ignoreQueryPrefix:!0}),l=i.user_id||i.vero_id||void 0,f={campaignHash:n},"string"==typeof l&&(f.customerId=l),t.next=13,(0,c.Z)("".concat(this.baseUrl,"discount-campaign/popup?").concat(u().stringify(f)));case 13:if(200===(m=t.sent).status){t.next=16;break}return t.abrupt("return");case 16:return t.next=18,m.text();case 18:if(r.innerHTML=t.sent,(p=document.getElementById("js-discount-campaign-data"))instanceof Element){t.next=22;break}return t.abrupt("return");case 22:if("string"!=typeof(h=this.campaignFromQuery(i))||"1"===p.dataset.hasCode){t.next=26;break}return t.next=26,this.sendRequest(h,f.customerId||"");case 26:o||this.refreshFromServer(),(d=p.dataset.endDate)&&e.initCounter(d),(g=document.getElementById("discountCampaignPopupClose"))&&g.addEventListener("click",(function(){g.classList.contains("js-discount-campaign-overwrite-no")&&(v.isPopupInitialized=!1),s.Z.fancybox.close()})),(y=document.getElementById("discountCampaignPopupOverwrite"))&&y.addEventListener("click",(function(){v.sendRequest(p.dataset.campaignHash||"",p.dataset.customerId||"").then((function(){return v.refreshFromServer()})).then((function(){return s.Z.fancybox.close()}))})),this.isPopupInitialized=!0;case 34:case"end":return t.stop()}}),t,this)}))),function(e){return f.apply(this,arguments)})},{key:"refreshFromServer",value:function(){var e=this;this.retrieveDiscountCampaignDataForCurrentUser().then((function(t){e.saveDiscountCampaignToLocalStorage(t),e.initBannerWithCampaign(t)}))}},{key:"sendRequest",value:(i=h(regeneratorRuntime.mark((function e(t,n){var r;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,c.Z)(this.baseUrl+"discount-campaign/add",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({campaignHash:t,customerId:n})});case 2:return r=e.sent,e.next=5,r.json();case 5:!0===e.sent&&((0,s.Z)("#overwriteDialog").hide(),(0,s.Z)("#overwriteSuccess").show());case 7:case"end":return e.stop()}}),e,this)}))),function(e,t){return i.apply(this,arguments)})}],a=[{key:"removeDiscountData",value:function(){o.removeItem(e.CAMPAIGN_STORAGE_NAME)}},{key:"isDiscountCampaignData",value:function(e){return"object"===m(e)&&null!==e&&e.hasOwnProperty("text")&&e.hasOwnProperty("hash")&&e.hasOwnProperty("updatedAt")&&e.hasOwnProperty("endDate")}},{key:"initCounter",value:function(e){var t,n=new Date(e),a=l(document.getElementsByClassName("js-discountCampaignCountdown"));try{for(a.s();!(t=a.n()).done;){var o=t.value;r.Z.init(o,n)}}catch(e){a.e(e)}finally{a.f()}}},{key:"hideNotificationBar",value:function(){var e=document.getElementsByClassName("js-topNotification");Array.from(e).forEach((function(e){e.classList.add("top-notification-container--hidden")}))}}],n&&d(t.prototype,n),a&&d(t,a),e}();g.CAMPAIGN_STORAGE_NAME="discount_campaign"},9127:function(e,t,n){"use strict";n.d(t,{Z:function(){return a}});n(1539),n(9714);function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}var t,n,a;return t=e,a=[{key:"init",value:function(t,n){setInterval((function(){e.updateCountdown(n,t)}),1e3)}},{key:"getTimeDifferenceArray",value:function(t,n){var r=t.getTime()-n.getTime(),a=function(e){return Math.max(0,e)};return[e.getDigits(a(Math.floor(r%864e5/36e5))),e.getDigits(a(Math.floor(r%36e5/6e4))),e.getDigits(a(Math.floor(r%6e4/1e3)))]}},{key:"getDigits",value:function(e){var t=e<10?"0"+e.toString():e.toString();return[t[0],t[1]]}},{key:"updateCountdown",value:function(t,n){var r=function(e,t){e&&(e.innerHTML=t)},a=e.getTimeDifferenceArray(t,new Date),o=a[0];r(n.querySelector(".countdownHourLeft"),o[0]),r(n.querySelector(".countdownHourRight"),o[1]);var i=a[1];r(n.querySelector(".countdownMinuteLeft"),i[0]),r(n.querySelector(".countdownMinuteRight"),i[1]);var u=a[2];r(n.querySelector(".countdownSecondLeft"),u[0]),r(n.querySelector(".countdownSecondRight"),u[1])}}],(n=null)&&r(t.prototype,n),a&&r(t,a),e}()},4022:function(e,t,n){"use strict";var r=n(9755),a=n.n(r),o=n(9707);n.n(o)()(a()),t.Z=a()},3765:function(e,t,n){"use strict";n(5666),n(8674),n(1539);var r=n(8557),a=n(7147);function o(e,t,n,r,a,o,i){try{var u=e[o](i),s=u.value}catch(e){return void n(e)}u.done?t(s):Promise.resolve(s).then(r,a)}var i=window.fetch||a.he,u=function(e){return"string"==typeof e?e:e.url},s=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t,n,a,o=arguments;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length<=0?void 0:o[0],n=o.length<=1?void 0:o[1],e.prev=2,e.next=5,i(t,n);case 5:return e.abrupt("return",e.sent);case 8:throw e.prev=8,e.t0=e.catch(2),a=new Error("Error while fetching url"),r.Z.log(a,{requestUrl:u(t),originalError:e.t0}),a;case 13:case"end":return e.stop()}}),e,null,[[2,8]])})),function(){var t=this,n=arguments;return new Promise((function(r,a){var i=e.apply(t,n);function u(e){o(i,r,a,u,s,"next",e)}function s(e){o(i,r,a,u,s,"throw",e)}u(void 0)}))});return function(){return t.apply(this,arguments)}}();t.Z=s}}]);
//# sourceMappingURL=7037.57946345.js.map